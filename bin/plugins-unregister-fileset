#!/bin/sh

#Usage: java org.campagnelab.gobyweb.clustergateway.registration.FileSetRegistration
#   [(-p|--plugins-dir) <pluginDir>] [(-d|--source-dir) <sourceDir>] [(-f|--fileset-area) <fileSetArea>] \
#   [(-t|--tag) <tag>]  --action unregister [(-o|--owner) <owner>] [-h|--help] [entries1 entries2 ... entriesN]

# Sample options for a remote unregistration:
# --fileset-area gobyweb@spanky.med.cornell.edu:/home/gobyweb/TRIAL-FILES/GOBYWEB_FILES/A
# --plugins-dir /Users/mas2182/Lab/Projects/Plugins/plugins2-with-tasks/test-data/root-for-rnaselect
# --owner plugins-sdk
# --action unregister
# --tag YERYVFK

# Sample options for a local unregistration:
# --fileset-area test-results
# --plugins-dir /Users/mas2182/Lab/Projects/Plugins/plugins2-with-tasks/test-data/root-for-rnaselect
# --owner plugins-sdk
# --action unregister
# --tag GXJAEOJ
WORKING_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
if [[ $OSTYPE == "cygwin" ]]; then
    WORKING_DIR=`cygpath -m "${WORKING_DIR}"`
fi
PARENT_DIR=`dirname ${WORKING_DIR}`
LIB_DIR=${PARENT_DIR}/lib
TARGET_DIR=${PARENT_DIR}/target
SNAPSHOT_JAR="${TARGET_DIR}/plugins-sdk.jar"
#echo "Snapshot jar: ${SNAPSHOT_JAR}"
#echo java -cp ${LIB_DIR}/plugins-sdk.jar:${SNAPSHOT_JAR}:${WORKING_DIR}/cluster_gateway.properties org.campagnelab.gobyweb.clustergateway.registration.FileSetRegistration --action register "$@"
java -cp ${LIB_DIR}/plugins-sdk.jar:${SNAPSHOT_JAR}:${WORKING_DIR}/cluster_gateway.properties org.campagnelab.gobyweb.clustergateway.registration.FileSetRegistration --action unregister "$@"

